#!/usr/bin/env bash
# vim: ft=bash

set +e

source "${BASHMATIC_HOME}/init.sh"

file="$1"

[[ -z ${file} ]]  && {
  error "USAGE: $0 <shell-file>"
  info "Prints to STDOUT it's markdown shdoc"
  exit 1
}

stderr="$(file.temp shdoc)"
inf "Extracting shell docs from ${file}..." >&2
/usr/local/bin/shdoc < "$1" 2>"${stderr}"
code=$?

if [[ ${code} -eq 0 ]]; then
  ok: >&2
else
  ui.closer.not-ok >&2
fi

[[ -s "${stderr}" ]] && printf "\n${txtred}$(cat "${stderr}")\n" >&2

exit ${code}



